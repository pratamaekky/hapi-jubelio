"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
function registerController(server, controller, initFn) {
    if (!controller.prototype.routes) {
        throw new Error("registerController() " + controller.name + " has no routes defined");
    }
    else {
        var _loop_1 = function (route) {
            var hapiRoute = Object.assign({}, route);
            hapiRoute.handler = function (request, reply) {
                var ctrl = initFn();
                ctrl.setRequestContext(request, reply);
                return ctrl[route.handlerName](request, reply);
            };
            delete hapiRoute.handlerName;
            server.route(hapiRoute);
        };
        for (var _i = 0, _a = controller.prototype.routes; _i < _a.length; _i++) {
            var route = _a[_i];
            _loop_1(route);
        }
    }
}
exports.registerController = registerController;
//# sourceMappingURL=register.js.map